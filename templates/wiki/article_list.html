{% extends "base.html" %}

{% block content %}
  <div style="display: flex;">
    <div style="width: 250px; margin-right: 20px;">
      <h3>Категории</h3>
      {% with categories=categories %}
        {% include 'wiki/category_tree.html' %}
      {% endwith %}
    </div>
    <div style="flex: 1;">
      <h1>Статьи</h1>
      {% if user.is_authenticated %}
        <a href="{% url 'wiki:article_create' %}">+ Создать статью</a>
      {% endif %}
      <hr>
      {% for article in articles %}
        <article>
          <h2><a href="{{ article.get_absolute_url }}">{{ article.title }}</a></h2>
          <p><small>Категория: {{ article.category }} | Автор: {{ article.author.email }}</small></p>
          <p>{{ article.content|truncatewords:30 }}</p>
          {% if article.file %}
            <p><a href="{{ article.file.url }}">Скачать файл</a></p>
          {% endif %}
          <hr>
        </article>
      {% empty %}
        <p>Нет опубликованных статей.</p>
      {% endfor %}
      {% include 'wiki/pagination.html' %}
    </div>
  </div>
{% endblock %}